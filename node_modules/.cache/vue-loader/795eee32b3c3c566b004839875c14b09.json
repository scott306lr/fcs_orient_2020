{"remainingRequest":"/home/lr/coding/javascript/Orient-main/orient_frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/lr/coding/javascript/Orient-main/orient_frontend/src/components/HintDetails.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/lr/coding/javascript/Orient-main/orient_frontend/src/components/HintDetails.vue","mtime":1618637272279},{"path":"/home/lr/coding/javascript/Orient-main/orient_frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/lr/coding/javascript/Orient-main/orient_frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/lr/coding/javascript/Orient-main/orient_frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/lr/coding/javascript/Orient-main/orient_frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgaWQ6IE51bWJlciwKICAgIHN0YXR1czogU3RyaW5nLAogIH0sCiAgY29tcHV0ZWQ6IHt9LAogIG1vdW50ZWQoKSB7fSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5ncm91cF9pZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5Lmdyb3VwOwogICAgdGhpcy5mZXRjaERhdGEoKTsKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBoaW50OiBKU09OLAogICAgICBoaW50czogSlNPTiwKICAgICAgZ3JvdXA6IEpTT04sCiAgICAgIGlucHV0X3RleHQ6ICIiLAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGZldGNoRGF0YSgpIHsKICAgICAgY29uc3QgdmFsX2hpbnQgPSBhd2FpdCB0aGlzLmF4aW9zCiAgICAgICAgLmdldCgiL2JhY2tlbmQvaGludC8iICsgdGhpcy5pZCArICIvIikKICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhOwogICAgICAgIH0pOwogICAgICB0aGlzLmhpbnQgPSB2YWxfaGludDsKICAgICAgY29uc3QgdmFsX2hpbnRzID0gYXdhaXQgdGhpcy5heGlvcwogICAgICAgIC5nZXQoIi9iYWNrZW5kL2dyb3Vwc2luZm8vIiArIHRoaXMuZ3JvdXBfaWQgKyAiLyIpCiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTsKICAgICAgICB9KTsKICAgICAgdGhpcy5oaW50cyA9IHZhbF9oaW50cy5oaW50czsKICAgICAgY29uc3QgdmFsX2dyb3VwID0gYXdhaXQgdGhpcy5heGlvcwogICAgICAgIC5nZXQoIi9iYWNrZW5kL2dyb3Vwcy8iICsgdGhpcy5ncm91cF9pZCArICIvIikKICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhOwogICAgICAgIH0pOwogICAgICB0aGlzLmdyb3VwID0gdmFsX2dyb3VwOwogICAgfSwKCiAgICBhc3luYyBoaW50X3NldF9kb25lKGhpbnRfaWQpIHsKICAgICAgdGhpcy5oaW50c1toaW50X2lkXS5kb25lID0gInllcyI7CiAgICAgIGNvbnNvbGUubG9nKGhpbnRfaWQpOwogICAgICBjb25zb2xlLmxvZyh0aGlzLmhpbnRzW2hpbnRfaWRdKTsKCiAgICAgIGF3YWl0IHRoaXMuYXhpb3MKICAgICAgICAucGF0Y2goIi9iYWNrZW5kL2dyb3Vwc2luZm8vIiArIHRoaXMuZ3JvdXBfaWQgKyAiLyIsIHsKICAgICAgICAgIGhpbnRzOiB0aGlzLmhpbnRzLAogICAgICAgIH0pCiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTsKICAgICAgICB9KTsKICAgIH0sCgogICAgYXN5bmMgYWRkX3Njb3JlKCkgewogICAgICB0aGlzLmdyb3VwWyJzY29yZSJdICs9IHRoaXMuaGludFsic2NvcmUiXTsKICAgICAgYXdhaXQgdGhpcy5heGlvcwogICAgICAgIC5wYXRjaCgiL2JhY2tlbmQvZ3JvdXBzLyIgKyB0aGlzLmdyb3VwX2lkLnRvU3RyaW5nKCkgKyAiLyIsIHsKICAgICAgICAgIHNjb3JlOiB0aGlzLmdyb3VwLnNjb3JlLAogICAgICAgIH0pCiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTsKICAgICAgICB9KTsKICAgIH0sCgogICAgYXN5bmMgb3Blbl9oaW50cygpIHsKICAgICAgdmFyIGNudCA9IDA7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5oaW50cy5sZW5ndGg7ICsraSkgewogICAgICAgIGNudCArPSB0aGlzLmhpbnRzW2ldLmF2YWlsID09PSAibm8iOwogICAgICB9CiAgICAgIE1hdGgubWluKDMsIGNudCk7CiAgICAgIGkgPSAwOwogICAgICB3aGlsZSAoY250ID4gMCkgewogICAgICAgIGkgPSAoaSArIDEpICUgdGhpcy5oaW50cy5sZW5ndGg7CgogICAgICAgIGlmICh0aGlzLmhpbnRzW2ldLmF2YWlsID09PSAibm8iICYmIE1hdGgucmFuZG9tKCkgPiAwLjcpIHsKICAgICAgICAgIHRoaXMuaGludHNbaV0uYXZhaWwgPSAieWVzIjsKICAgICAgICAgIGF3YWl0IHRoaXMuYXhpb3MKICAgICAgICAgICAgLnBhdGNoKCIvYmFja2VuZC9oaW50cy8iICsgdGhpcy5ncm91cF9pZC50b1N0cmluZygpICsgIi8iLCB7CiAgICAgICAgICAgICAgaGludHM6IHRoaXMuaGludHMsCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhOwogICAgICAgICAgICB9KTsKICAgICAgICAgIGNudCAtPSAxOwogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICBhc3luYyBjaGVja0Fuc3dlcihhbnMpIHsKICAgICAgaWYgKGFucyA9PT0gdGhpcy5oaW50WyJhbnN3ZXIiXSkgewogICAgICAgIC8vIFNob3cgY2VsZWJyYXRpb25zID8/CiAgICAgICAgYWxlcnQoIui8uOWFpeato+eiuu+8gSIpOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5oaW50cy5sZW5ndGg7ICsraSkgewogICAgICAgICAgaWYgKAogICAgICAgICAgICB0aGlzLmhpbnRzW2ldLmlkID09PSB0aGlzLmhpbnQuaWQgJiYKICAgICAgICAgICAgdGhpcy5oaW50c1tpXS5kb25lID09PSAibm8iCiAgICAgICAgICApIHsKICAgICAgICAgICAgdGhpcy5oaW50X3NldF9kb25lKGkpOwogICAgICAgICAgICBjb25zb2xlLmxvZyhpKTsKICAgICAgICAgICAgLy90aGlzLmFkZF9zY29yZSgpOwogICAgICAgICAgICAvL2NvbnNvbGUubG9nKGkpOwogICAgICAgICAgICAvL3RoaXMub3Blbl9oaW50cygpOwogICAgICAgICAgICAvL2NvbnNvbGUubG9nKGkpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYWxlcnQoIui8uOWFpemMr+iqpO+8gSIpOwogICAgICB9CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["HintDetails.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"HintDetails.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <a> {{ group_id }} </a>\n    <b-card\n      bg-variant=\"dark\"\n      text-variant=\"white\"\n      style=\"max-width: 30rem\"\n      class=\"mb-1\"\n    >\n      <b-card-img-lazy :src=\"id + '.jpg'\" alt=\"Image\" bottom></b-card-img-lazy>\n\n      <b-card-body>\n        <b-card-title>{{ hint.name }}</b-card-title>\n        <b-card-sub-title class=\"mb-2\">{{ hint.difficulty }}</b-card-sub-title>\n        <b-card-text>{{ hint.text }}</b-card-text>\n\n        <b-input-group>\n          <b-form-input\n            v-model=\"input_text\"\n            placeholder=\"請輸入答案\"\n          ></b-form-input>\n\n          <template #append>\n            <b-button @click=\"checkAnswer(input_text)\">確認</b-button>\n          </template>\n        </b-input-group>\n      </b-card-body>\n    </b-card>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    id: Number,\n    status: String,\n  },\n  computed: {},\n  mounted() {},\n  created() {\n    this.group_id = this.$route.query.group;\n    this.fetchData();\n  },\n  data() {\n    return {\n      hint: JSON,\n      hints: JSON,\n      group: JSON,\n      input_text: \"\",\n    };\n  },\n  methods: {\n    async fetchData() {\n      const val_hint = await this.axios\n        .get(\"/backend/hint/\" + this.id + \"/\")\n        .then(function (response) {\n          return response.data;\n        });\n      this.hint = val_hint;\n      const val_hints = await this.axios\n        .get(\"/backend/groupsinfo/\" + this.group_id + \"/\")\n        .then(function (response) {\n          return response.data;\n        });\n      this.hints = val_hints.hints;\n      const val_group = await this.axios\n        .get(\"/backend/groups/\" + this.group_id + \"/\")\n        .then(function (response) {\n          return response.data;\n        });\n      this.group = val_group;\n    },\n\n    async hint_set_done(hint_id) {\n      this.hints[hint_id].done = \"yes\";\n      console.log(hint_id);\n      console.log(this.hints[hint_id]);\n\n      await this.axios\n        .patch(\"/backend/groupsinfo/\" + this.group_id + \"/\", {\n          hints: this.hints,\n        })\n        .then(function (response) {\n          return response.data;\n        });\n    },\n\n    async add_score() {\n      this.group[\"score\"] += this.hint[\"score\"];\n      await this.axios\n        .patch(\"/backend/groups/\" + this.group_id.toString() + \"/\", {\n          score: this.group.score,\n        })\n        .then(function (response) {\n          return response.data;\n        });\n    },\n\n    async open_hints() {\n      var cnt = 0;\n      for (var i = 0; i < this.hints.length; ++i) {\n        cnt += this.hints[i].avail === \"no\";\n      }\n      Math.min(3, cnt);\n      i = 0;\n      while (cnt > 0) {\n        i = (i + 1) % this.hints.length;\n\n        if (this.hints[i].avail === \"no\" && Math.random() > 0.7) {\n          this.hints[i].avail = \"yes\";\n          await this.axios\n            .patch(\"/backend/hints/\" + this.group_id.toString() + \"/\", {\n              hints: this.hints,\n            })\n            .then(function (response) {\n              return response.data;\n            });\n          cnt -= 1;\n        }\n      }\n    },\n\n    async checkAnswer(ans) {\n      if (ans === this.hint[\"answer\"]) {\n        // Show celebrations ??\n        alert(\"輸入正確！\");\n        for (var i = 0; i < this.hints.length; ++i) {\n          if (\n            this.hints[i].id === this.hint.id &&\n            this.hints[i].done === \"no\"\n          ) {\n            this.hint_set_done(i);\n            console.log(i);\n            //this.add_score();\n            //console.log(i);\n            //this.open_hints();\n            //console.log(i);\n            break;\n          }\n        }\n      } else {\n        alert(\"輸入錯誤！\");\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n"]}]}