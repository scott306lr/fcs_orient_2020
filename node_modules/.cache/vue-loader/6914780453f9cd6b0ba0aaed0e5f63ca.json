{"remainingRequest":"/home/lr/coding/javascript/fcs_orient_2021/orient_frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/lr/coding/javascript/fcs_orient_2021/orient_frontend/src/components/HintDetails.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/lr/coding/javascript/fcs_orient_2021/orient_frontend/src/components/HintDetails.vue","mtime":1619181859179},{"path":"/home/lr/coding/javascript/fcs_orient_2021/orient_frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/lr/coding/javascript/fcs_orient_2021/orient_frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/lr/coding/javascript/fcs_orient_2021/orient_frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/lr/coding/javascript/fcs_orient_2021/orient_frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgaWQ6IE51bWJlciwKICAgIHN0YXR1czogU3RyaW5nLAogIH0sCiAgY29tcHV0ZWQ6IHt9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmZldGNoSGludCgpOwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ3JvdXBfaWQgPSB0aGlzLiRyb3V0ZS5xdWVyeS5ncm91cDsKICAgIC8vdGhpcy5mZXRjaERhdGEoKTsKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBoaW50OiBKU09OLAogICAgICBoaW50czogSlNPTiwKICAgICAgZ3JvdXA6IEpTT04sCiAgICAgIGlucHV0X3RleHQ6ICIiLAogICAgICB1cGxvYWRtb2RlOiBmYWxzZSwKICAgICAgaW5wdXRtb2RlOiBmYWxzZSwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBmZXRjaEhpbnQoKSB7CiAgICAgIGNvbnN0IHZhbF9oaW50ID0gYXdhaXQgdGhpcy5heGlvcwogICAgICAgIC5nZXQoIi9iYWNrZW5kL2hpbnQvIiArIHRoaXMuaWQgKyAiLyIpCiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTsKICAgICAgICB9KTsKICAgICAgdGhpcy5oaW50ID0gdmFsX2hpbnQ7CiAgICAgIGNvbnNvbGUubG9nKHZhbF9oaW50KTsKICAgICAgaWYgKHZhbF9oaW50LmhpbnRfY2hvaWNlcyA9PT0gMykgewogICAgICAgIHRoaXMudXBsb2FkbW9kZSA9IHRydWU7CiAgICAgIH1lbHNlIHsKICAgICAgICB0aGlzLmlucHV0bW9kZSA9IHRydWU7CiAgICAgIH0KICAgIH0sCiAgCiAgICBhc3luYyBmZXRjaEhpbnRzKCkgewogICAgICBjb25zdCB2YWxfaGludHMgPSBhd2FpdCB0aGlzLmF4aW9zCiAgICAgICAgLmdldCgiL2JhY2tlbmQvZ3JvdXBzaW5mby8iICsgdGhpcy5ncm91cF9pZCArICIvIikKICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhOwogICAgICAgIH0pOwogICAgICB0aGlzLmhpbnRzID0gdmFsX2hpbnRzLmhpbnRzOwogICAgfSwKCiAgICBhc3luYyBmZXRjaEdyb3VwKCkgewogICAgICBjb25zdCB2YWxfZ3JvdXAgPSBhd2FpdCB0aGlzLmF4aW9zCiAgICAgICAgLmdldCgiL2JhY2tlbmQvZ3JvdXBzLyIgKyB0aGlzLmdyb3VwX2lkICsgIi8iKQogICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7CiAgICAgICAgfSk7CiAgICAgIHRoaXMuZ3JvdXAgPSB2YWxfZ3JvdXA7CiAgICB9LAoKICAgIGFzeW5jIGhpbnRfc2V0X2RvbmUoaGludF9pZCkgewogICAgICB0aGlzLmhpbnRzW2hpbnRfaWRdLmRvbmUgPSAieWVzIjsKICAgICAgY29uc29sZS5sb2coaGludF9pZCk7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMuaGludHNbaGludF9pZF0pOwoKICAgICAgYXdhaXQgdGhpcy5heGlvcwogICAgICAgIC5wYXRjaCgiL2JhY2tlbmQvZ3JvdXBzaW5mby8iICsgdGhpcy5ncm91cF9pZCArICIvIiwgewogICAgICAgICAgaGludHM6IHRoaXMuaGludHMsCiAgICAgICAgfSkKICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhOwogICAgICAgIH0pOwogICAgfSwKCiAgICBhc3luYyBhZGRfc2NvcmUoKSB7CiAgICAgIHRoaXMuZ3JvdXBbInNjb3JlIl0gKz0gdGhpcy5oaW50WyJzY29yZSJdOwogICAgICBhd2FpdCB0aGlzLmF4aW9zCiAgICAgICAgLnBhdGNoKCIvYmFja2VuZC9ncm91cHMvIiArIHRoaXMuZ3JvdXBfaWQudG9TdHJpbmcoKSArICIvIiwgewogICAgICAgICAgc2NvcmU6IHRoaXMuZ3JvdXAuc2NvcmUsCiAgICAgICAgfSkKICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhOwogICAgICAgIH0pOwogICAgfSwKCiAgICBhc3luYyBvcGVuX2hpbnRzKCkgewogICAgICB2YXIgY250ID0gMDsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmhpbnRzLmxlbmd0aDsgKytpKSB7CiAgICAgICAgY250ICs9IHRoaXMuaGludHNbaV0uYXZhaWwgPT09ICJubyI7CiAgICAgIH0KICAgICAgTWF0aC5taW4oMywgY250KTsKICAgICAgaSA9IDA7CiAgICAgIHdoaWxlIChjbnQgPiAwKSB7CiAgICAgICAgaSA9IChpICsgMSkgJSB0aGlzLmhpbnRzLmxlbmd0aDsKCiAgICAgICAgaWYgKHRoaXMuaGludHNbaV0uYXZhaWwgPT09ICJubyIgJiYgTWF0aC5yYW5kb20oKSA+IDAuNykgewogICAgICAgICAgdGhpcy5oaW50c1tpXS5hdmFpbCA9ICJ5ZXMiOwogICAgICAgICAgYXdhaXQgdGhpcy5heGlvcwogICAgICAgICAgICAucGF0Y2goIi9iYWNrZW5kL2hpbnRzLyIgKyB0aGlzLmdyb3VwX2lkLnRvU3RyaW5nKCkgKyAiLyIsIHsKICAgICAgICAgICAgICBoaW50czogdGhpcy5oaW50cywKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgY250IC09IDE7CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIGFzeW5jIGNoZWNrQW5zd2VyKGFucykgewogICAgICBpZiAoYW5zID09PSB0aGlzLmhpbnRbImFuc3dlciJdKSB7CiAgICAgICAgdGhpcy5mZXRjaEhpbnRzKCk7CiAgICAgICAgdGhpcy5mZXRjaEdyb3VwKCk7CiAgICAgICAgLy8gU2hvdyBjZWxlYnJhdGlvbnMgPz8KICAgICAgICBhbGVydCgi6Ly45YWl5q2j56K677yBIik7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmhpbnRzLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIHRoaXMuaGludHNbaV0uaWQgPT09IHRoaXMuaGludC5pZCAmJgogICAgICAgICAgICB0aGlzLmhpbnRzW2ldLmRvbmUgPT09ICJubyIKICAgICAgICAgICkgewogICAgICAgICAgICB0aGlzLmhpbnRfc2V0X2RvbmUoaSk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGkpOwogICAgICAgICAgICAvL3RoaXMuYWRkX3Njb3JlKCk7CiAgICAgICAgICAgIC8vY29uc29sZS5sb2coaSk7CiAgICAgICAgICAgIC8vdGhpcy5vcGVuX2hpbnRzKCk7CiAgICAgICAgICAgIC8vY29uc29sZS5sb2coaSk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBhbGVydCgi6Ly45YWl6Yyv6Kqk77yBIik7CiAgICAgIH0KICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["HintDetails.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"HintDetails.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <a> {{ group_id }} </a>\n    <b-card\n      bg-variant=\"dark\"\n      text-variant=\"white\"\n      style=\"max-width: 30rem\"\n      class=\"mb-1\"\n    >\n      <b-card-img-lazy :src=\"id + '.jpg'\" alt=\"Image\" bottom></b-card-img-lazy>\n\n      <b-card-body>\n        <b-card-title>{{ hint.name }}</b-card-title>\n        <b-card-sub-title class=\"mb-2\">{{ hint.difficulty }}</b-card-sub-title>\n        <b-card-text>{{ hint.text }}</b-card-text>\n\n        <b-collapse :id=\"'collapse' + id\" v-model=\"uploadmode\" class=\"mt-2\">\n            <b-input-group>\n            <b-form-input\n              v-model=\"input_text\"\n              placeholder=\"請輸入答案\"\n            ></b-form-input>\n\n            <template #append>\n              <b-button @click=\"checkAnswer(input_text)\">確認</b-button>\n            </template>\n          </b-input-group>\n        </b-collapse>\n        \n      </b-card-body>\n    </b-card>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    id: Number,\n    status: String,\n  },\n  computed: {},\n  mounted() {\n    this.fetchHint();\n  },\n  created() {\n    this.group_id = this.$route.query.group;\n    //this.fetchData();\n  },\n  data() {\n    return {\n      hint: JSON,\n      hints: JSON,\n      group: JSON,\n      input_text: \"\",\n      uploadmode: false,\n      inputmode: false,\n    };\n  },\n  methods: {\n    async fetchHint() {\n      const val_hint = await this.axios\n        .get(\"/backend/hint/\" + this.id + \"/\")\n        .then(function (response) {\n          return response.data;\n        });\n      this.hint = val_hint;\n      console.log(val_hint);\n      if (val_hint.hint_choices === 3) {\n        this.uploadmode = true;\n      }else {\n        this.inputmode = true;\n      }\n    },\n  \n    async fetchHints() {\n      const val_hints = await this.axios\n        .get(\"/backend/groupsinfo/\" + this.group_id + \"/\")\n        .then(function (response) {\n          return response.data;\n        });\n      this.hints = val_hints.hints;\n    },\n\n    async fetchGroup() {\n      const val_group = await this.axios\n        .get(\"/backend/groups/\" + this.group_id + \"/\")\n        .then(function (response) {\n          return response.data;\n        });\n      this.group = val_group;\n    },\n\n    async hint_set_done(hint_id) {\n      this.hints[hint_id].done = \"yes\";\n      console.log(hint_id);\n      console.log(this.hints[hint_id]);\n\n      await this.axios\n        .patch(\"/backend/groupsinfo/\" + this.group_id + \"/\", {\n          hints: this.hints,\n        })\n        .then(function (response) {\n          return response.data;\n        });\n    },\n\n    async add_score() {\n      this.group[\"score\"] += this.hint[\"score\"];\n      await this.axios\n        .patch(\"/backend/groups/\" + this.group_id.toString() + \"/\", {\n          score: this.group.score,\n        })\n        .then(function (response) {\n          return response.data;\n        });\n    },\n\n    async open_hints() {\n      var cnt = 0;\n      for (var i = 0; i < this.hints.length; ++i) {\n        cnt += this.hints[i].avail === \"no\";\n      }\n      Math.min(3, cnt);\n      i = 0;\n      while (cnt > 0) {\n        i = (i + 1) % this.hints.length;\n\n        if (this.hints[i].avail === \"no\" && Math.random() > 0.7) {\n          this.hints[i].avail = \"yes\";\n          await this.axios\n            .patch(\"/backend/hints/\" + this.group_id.toString() + \"/\", {\n              hints: this.hints,\n            })\n            .then(function (response) {\n              return response.data;\n            });\n          cnt -= 1;\n        }\n      }\n    },\n\n    async checkAnswer(ans) {\n      if (ans === this.hint[\"answer\"]) {\n        this.fetchHints();\n        this.fetchGroup();\n        // Show celebrations ??\n        alert(\"輸入正確！\");\n        for (var i = 0; i < this.hints.length; ++i) {\n          if (\n            this.hints[i].id === this.hint.id &&\n            this.hints[i].done === \"no\"\n          ) {\n            this.hint_set_done(i);\n            console.log(i);\n            //this.add_score();\n            //console.log(i);\n            //this.open_hints();\n            //console.log(i);\n            break;\n          }\n        }\n      } else {\n        alert(\"輸入錯誤！\");\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n"]}]}